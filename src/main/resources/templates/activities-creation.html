<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:include="fragments/header :: header">
</head>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>

	html {
		height: 300%;
		background-repeat: repeat-y;
	}
	
	body {
		font-family: "Montserrat", sans-serif;
	}
	.w3-row-padding img {
		margin-bottom: 12px
	}
	.w3-sidebar {
		width: 120px;background: #222;
	}
	
	tr {
		border-bottom: 1px solid white;
	}
	
	#main {
		margin-left: 120px
	}
	@media only screen and (max-width: 600px) {
		#main {margin-left: 0}
	}
	
	.customSchedule {
		margin-top: 100px;
	}

</style>
<body class="w3-black">

	<input th:id="stepNumber" type="hidden" th:value="${stepNumber}">
	<input th:id="currentTab" type="hidden" th:value="${currentTab}">
	<input th:id="validatedSteps" type="hidden" th:value="${validatedSteps}">

	<!-- Icon Bar (Sidebar - hidden on small screens) -->
	<nav class="w3-sidebar w3-bar-block w3-large w3-hide-small w3-center" style="width:20%">
	
	  <div id="go-to-stepTitle" class="w3-bar-item w3-button w3-padding-large w3-black" onclick="showTabFromNavBar('0');">
	    <i class="fa fa-etsy w3-xlarge"></i>
	    <p>TITLE</p>
	  </div>
	  <div id="go-to-stepCategory" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('1');">
	    <i class="fa fa-user w3-xlarge"></i>
	    <p>CATEGORY</p>
	  </div>
	  <div id="go-to-stepDescription" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('2');">
	    <i class="fa fa-eye w3-xlarge"></i>
	    <p>DESCRIPTION</p>
	  </div>
	  <div id="go-to-stepMeetingPoint" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('3');">
	    <i class="fa fa-envelope w3-xlarge"></i>
	    <p>MEETING POINT</p>
	  </div>
	    <div id="go-to-stepPeriod" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('4');">
	    <i class="fa fa-home w3-xlarge"></i>
	    <p>PERIOD</p>
	  </div>
	  <div id="go-to-stepSchedules" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('5');">
	    <i class="fa fa-user w3-xlarge"></i>
	    <p>SCHEDULE</p>
	  </div>
	  <div id="go-to-stepImages" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('6');">
	    <i class="fa fa-eye w3-xlarge"></i>
	    <p>IMAGE</p>
	  </div>
	  <div id="go-to-stepParticipationCriterias" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('7');">
	    <i class="fa fa-envelope w3-xlarge"></i>
	    <p>CRITERIAS</p>
	  </div>
	  <div id="go-to-stepDefaultPrice" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('8');">
	    <i class="fa fa-envelope w3-xlarge"></i>
	    <p>PRICE</p>
	  </div>
	  <div id="go-to-stepPaxs" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('9');">
	    <i class="fa fa-envelope w3-xlarge"></i>
	    <p>PAXS</p>
	  </div>
	  <div id="go-to-stepGroupCapacity" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('10');">
	    <i class="fa fa-envelope w3-xlarge"></i>
	    <p>GROUP CAPACITY</p>
	  </div>
	  <div id="go-to-stepValidate" class="w3-bar-item w3-button w3-padding-large w3-hover-black" onclick="showTabFromNavBar('11');">
	    <i class="fa fa-envelope w3-xlarge"></i>
	    <p>VALIDATE AND SEND</p>
	  </div>
	</nav>
	
	<!-- Navbar on small screens (Hidden on medium and large screens) -->
	<div class="w3-top w3-hide-large w3-hide-medium" id="myNavbar">
	  <div class="w3-bar w3-black w3-opacity w3-hover-opacity-off w3-center w3-small">
	    <a href="#" class="w3-bar-item w3-button" style="width:25% !important">HOME</a>
	    <a href="#about" class="w3-bar-item w3-button" style="width:25% !important">ABOUT</a>
	    <a href="#photos" class="w3-bar-item w3-button" style="width:25% !important">PHOTOS</a>
	    <a href="#contact" class="w3-bar-item w3-button" style="width:25% !important">CONTACT</a>
	  </div>
	</div>

<!-- Page Content -->
<!-- <div class="w3-padding-large" id="main"> -->
<!--   <!-- Header/Home --> -->
<!--   <header class="w3-container w3-padding-32 w3-center w3-black" id="home"> -->
<!--     <h1 class="w3-jumbo"><span class="w3-hide-small"></span></h1> -->
<!--     <p>Photographer and Web Designer.</p> -->
<!--   </header> -->
<!--   <!-- End Portfolio Section --> -->
<!--   </div> -->

	<!-- STEP 1 : Title -->
	<form th:id="form-step-title" th:action="@{/activity/stepTitle}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
		<div id="step-title" class="tab flex w3-container w3-padding-64 w3-center" data-isvalid="false">
			<div class="flex-container">
				<div class="form-title">
					<!-- Title and indications -->
					<span class="title" th:text="#{title_step_name}"></span> 
					<br>
				</div>
				<div class="form-indication">
					<span class="indication" th:text="#{title_step_indication}"></span>
				</div>
				<!-- Input -->
				<div th:class="${#fields.hasErrors('title') ? 'form-group has-error' : 'form-group'}">
					<input type="text" class="form-control form-input" th:field="*{title}" autocomplete="off" onclick="changeStepToValidate()" />
				</div>
				<!--  Error message bloc -->
				<div th:if="${#fields.hasErrors('title')}" class="alert alert-danger error-message-title" role="alert">
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> <span th:errors="*{title}"></span>
				</div>
				<div class="form-button">
					<button type="submit" id="validateBtn" class="btn btn-lg btn-primary">Valider</button>
				</div>
			</div>
		</div>
	</form>
	
	<!-- STEP 2 : Category -->
	<form th:id="form-step-category" th:action="@{/activity/stepCategory}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
		<div id="step-category" class="tab w3-container w3-padding-64 w3-center" data-isvalid="false">
			<div class="flex-container">
				<div class="form-title">
					<span class="title" th:text="#{category_step_name}"></span>
				</div>
				<div class="form-indication">
					<span class="indication" th:text="#{category_step_indication}"></span>
				</div>
	<!-- Input -->
				<div th:class="${#fields.hasErrors('category') ? 'form-group has-error' : 'form-group'}">
					<select class="form-control form-control-lg" th:field="*{category}" onclick="">
						<option th:text="#{cat_info_message}" th:value="NULL" selected="selected"></option>
						<option th:value="#{cat_art}" th:text="#{cat_art}"></option>
						<option th:value="#{cat_sport}" th:text="#{cat_sport}"></option>
						<option th:value="#{cat_nature}" th:text="#{cat_nature}"></option>
						<option th:value="#{cat_food}" th:text="#{cat_food}"></option>
						<option th:value="#{cat_entertainment}" th:text="#{cat_entertainment}"></option>
						<option th:value="#{cat_nightlife}" th:text="#{cat_nightlife}"></option>
						<option th:value="#{cat_discovery}" th:text="#{cat_discovery}"></option>
					</select>
				</div>
	<!--  Error message bloc -->
				<div th:if="${#fields.hasErrors('category')}" class="alert alert-danger error-message-title" role="alert">
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
					<span th:errors="*{category}"></span>
				</div>
				<div class="form-button">
					<button type="submit" id="validateBtn" class="btn btn-lg btn-primary">Valider</button>
				</div>
			</div>
		</div>
	</form>

<!-- STEP 3 : Description -->
	<form th:id="form-step-description" th:action="@{/activity/stepDescription}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
		<div id="step-description" class="tab" data-isvalid="false">
			<div class="flex-container">
				<div class="form-title">
					<span class="title" th:text="#{description_step_name}"></span>
				</div>
				<div class="form-indication">
					<span class="indication" th:text="#{description_step_indication}"></span>
				</div>
				<!-- Select description language -->
				<select id="selectDescLang" class="form-control" onChange="toggleDescLang();">
					<option th:value="FR" th:text="Francais"></option>
					<option th:value="EN" th:text="#{lang_en}"></option>
					<option th:value="ES" th:text="#{lang_es}"></option>
					<option th:value="CUSTOM" th:text="Personnalisé"></option>
				</select>
	<!-- Input -->
				<div id="blocDescFR" class="form-group">
					<textarea th:field="*{descriptionFre}" class="form-control" oninput="this.className = 'form-control'" th:placeholder="#{desc_indication}" rows="3" onclick=""></textarea>
					<div th:if="${#fields.hasErrors('descriptionFre')}" class="alert alert-danger error-message-title" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span th:errors="*{descriptionFre}"></span>
					</div>
				</div>
				<div id="blocDescEN" class="form-group">
					<textarea th:field="*{descriptionEng}" class="form-control" oninput="this.className = 'form-control'" th:placeholder="#{desc_indication}" rows="3" onclick=""></textarea>
					<div th:if="${#fields.hasErrors('descriptionEng')}" class="alert alert-danger error-message-title" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span th:errors="*{descriptionEng}"></span>
					</div>
				</div>
				<div id="blocDescES" class="form-group">
					<textarea th:field="*{descriptionEsp}" class="form-control" oninput="this.className = 'form-control'" th:placeholder="#{desc_indication}" rows="3" onclick=""></textarea>
					<div th:if="${#fields.hasErrors('descriptionEsp')}" class="alert alert-danger error-message-title" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span th:errors="*{descriptionEsp}"></span>
					</div>
				</div>
				<div id="blocDescCUSTOM" class="form-group" style="display: flex; flex-direction: column;">
					<div>
						<span class="indication">Set the language name</span>
						<input type="text" class="form-control form-input" placeholder="Set language name" autocomplete="off" />
					</div>
					<textarea th:field="*{descriptionEsp}" class="form-control" oninput="this.className = 'form-control'" th:placeholder="#{desc_indication}" rows="3" onclick=""></textarea>
					<div th:if="${#fields.hasErrors('descriptionEsp')}" class="alert alert-danger error-message-title" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span th:errors="*{descriptionEsp}"></span>
					</div>
				</div>
				<div class="form-button">
					<button type="submit" id="validateBtn" class="btn btn-lg btn-primary">Valider</button>
				</div>
			</div>
		</div>
	</form>
	
	<!-- STEP 4 : MeetingPoint -->
	<form th:id="form-step-meetingPoint" th:action="@{/activity/stepMeetingPoint}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>

		<input type="hidden" th:field="*{latitude}"></input>
		<input type="hidden" th:field="*{longitude}"></input>
		<input type="hidden" id="zoom" name="zoom"></input>
		
		<div class="tab" id="step-meetingPoint" data-isvalid="false">
			<div class="flex-container">
				<div class="form-title">
					<span class="title" th:text="#{meetingpoint_step_name}"></span>
				</div>
				<div class="form-indication">
					<span class="indication" th:text="#{meetingpoint_step_indication}"></span>
				</div>
	<!-- Input -->
				<div id="meetingPoint-container">
					<span th:text="#{meeting_point_name}"></span>
					<input type="text" class="form-control form-input" th:field="*{meetingPoint}" th:placeholder="#{meeting_point_name}" onclick="" autocomplete="off" />
					<div th:if="${#fields.hasErrors('meetingPoint')}" class="alert alert-danger error-message-title" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span th:errors="*{meetingPoint}"></span>
					</div>
					
					<span th:text="#{address}"></span>
					<input type="text" class="form-control form-input" th:field="*{address}" th:placeholder="#{address}" onclick="changeDestinationCityWithId(this.id); " autocomplete="off" />
					<div th:if="${#fields.hasErrors('address')}" class="alert alert-danger error-message-title" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span th:errors="*{address}"></span>
					</div>
					
					<span th:text="#{city}"></span>
					<input type="text" class="form-control form-input" th:field="*{city}" th:placeholder="#{city}" onclick="changeDestinationCityWithId(this.id); " autocomplete="off" />
					<div th:if="${#fields.hasErrors('city')}" class="alert alert-danger error-message-title" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span th:errors="*{city}"></span>
					</div>
					
					<span th:text="#{country}"></span>
					<input type="text" class="form-control form-input" th:field="*{country}" th:placeholder="#{country}" onclick="" autocomplete="off" />
					<div th:if="${#fields.hasErrors('country')}" class="alert alert-danger error-message-title" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span th:errors="*{country}"></span>
					</div>
					
					<span th:text="#{zip_code}"></span>				
					<input type="text" class="form-control form-input" th:field="*{zipCode}" th:placeholder="#{zip_code}" onclick="" autocomplete="off" />	
					<div th:if="${#fields.hasErrors('zipCode')}" class="alert alert-danger error-message-title" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span th:errors="*{zipCode}"></span>
					</div>
				</div>
	<!-- Google map			 -->
				<div id="googleMap"></div>
				<div class="form-button">
					<button type="submit" id="validateBtn" class="btn btn-lg btn-primary">Valider</button>
				</div>
			</div>
		</div>
	</form>
	
	<!-- STEP 5 : Period -->
	<form th:id="form-step-period" th:action="@{/activity/stepPeriod}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
		<div class="tab" id="step-period" data-isvalid="false">
			<div class="form-container">
				<div class="form-title">
					<span class="title" th:text="#{meetingpoint_step_name}"></span>
				</div>
				<div class="form-indication">
					<span class="indication" th:text="#{meetingpoint_step_indication}"></span>
				</div>
				<div class="form-group">
					<span class="datepickerContainer">
						<span id="startDateIcon" class="cal glyphicon glyphicon-calendar">
						</span>		
						<input th:field="*{beginDate}" onchange="changeReturnDate();" class="form-control form-input" />
					</span>
				</div>
				<div class="form-group">
					<span class="datepickerContainer">
						<span id="endDateIcon" class="cal glyphicon glyphicon-calendar">
						</span>
						<input th:field="*{endDate}" class="form-control form-input" />
					</span>
				</div>
				<div class="form-button">
					<button type="submit" id="validateBtn" class="btn btn-lg btn-primary">Valider</button>
				</div>
			</div>
		</div>		
	</form>
	
	<!-- STEP 6 : Schedules -->
	<form th:id="form-step-schedules" th:action="@{/activity/stepSchedules}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate >
	<!-- BEGIN Schedule bloc -->
		<div class="tab" id="step-schedules" data-isvalid="false"> 
			<div class="form-container">
				<div th:each="currentSchedule, statusSchedule : ${activity.usualSchedules}">
				<!--  Créer div pour chaque jour + jours custom -->
					<div th:if="${currentSchedule.sessions}" class="panel-body">
						<table class="table">
							<thead>
								<tr class="primary">
									<th scope="col">Jour : <h3><span th:text="${currentSchedule.weekdayName}"></span></h3></th>
									<!-- Nom jour de la semaine ou custom -->
									<th scope="col">Begin</th>
									<th scope="col">End</th>
									<th scope="col">Add extra session</th>
								</tr>
							</thead>
							<!-- TODO : Si on affiche le weekday alors c'est qu'on a setté au moins un input endHour -->
							<tbody th:id="'sessionBloc' + ${statusSchedule.index} + ${statusSession.index}" th:each="currentSession, statusSession : ${currentSchedule.sessions}" class="sessionBloc">
								<!-- Status -->
								<tr>
									<td class="">Session N°<span th:text="${statusSession.index}"></span></td>
									<!-- beginHour -->
									<td class="">
										<!-- IF : session is already setted --> 
										<span th:if="${currentSession.beginHour}" th:text="${currentSession.beginHour}"></span> 
										<!-- ELSE : session is not setted --> 
										<input th:unless="${currentSession.beginHour}" 
											type="text" 
											th:field="*{usualSchedules[__${statusSchedule.index}__].sessions[__${statusSession.index}__].beginHour}" 
											class="form-control clockpicker startInputHour"
											th:attr="data-session-id = 'begin' + ${statusSchedule.index} + '' + ${statusSession.index}" 
											th:onchange="|changeEndHour(this)|"> 
									</td>
									<!-- endHour -->
									<td class="">
										<span th:if="${currentSession.endHour}" th:text="${currentSession.endHour}"></span> 
										<input th:unless="${currentSession.endHour}" 
											type="text" 
											th:field="*{usualSchedules[__${statusSchedule.index}__].sessions[__${statusSession.index}__].endHour}" 
											class="form-control clockpicker endInputHour"
											th:attr="data-session-id = 'end' + ${statusSchedule.index} + '' + ${statusSession.index}" 
											th:onchange="|updateDifferenceHour(this)|">
									</td>

									<td>
										<input type="hidden" th:field="*{usualSchedules[__${currentSchedule.weekdayNumber}__].sessions[__${currentSession.sessionNumber}__].beginHour}"> 
										<input type="hidden" th:field="*{usualSchedules[__${currentSchedule.weekdayNumber}__].sessions[__${currentSession.sessionNumber}__].endHour}"> 
										<input type="hidden" th:field="*{usualSchedules[__${currentSchedule.weekdayNumber}__].sessions[__${currentSession.sessionNumber}__].sessionNumber}"> 
										<input type="hidden" th:field="*{usualSchedules[__${currentSchedule.weekdayNumber}__].weekdayNumber}">
										<br>
										<button type="button" th:id="addSessionBtn + ${statusSchedule.index} + ${statusSession.index}" th:onclick="|addSession('${statusSchedule.index}', '${statusSession.index}')|">
											<span class="glyphicon glyphicon-plus"></span>
										</button>
										<button type="button" th:id="removeSessionBtn + ${statusSchedule.index} + ${statusSession.index}" th:onclick="|removeSession('${statusSchedule.index}', '${statusSession.index}')|">
											<span class="glyphicon glyphicon-minus"></span>
										</button>
									</td>
								</tr>
							</tbody>
							<tbody>
						</table>
					</div>
				</div>
			<button type="submit" id="validateBtn" class="btn btn-lg btn-primary">Valider</button>
			
			
						<!-- Display SCHEDULES -->
<!-- 			<div id="schedulesCreated" class="col-lg-6 pax-bloc"> -->
<!-- 				<table>  -->
<!-- 					<tr>  -->
<!-- 						<td style="border:1px solid black">JOURS</td>  -->
<!-- 						<td style="border:1px solid black" colspan="2">HORAIRES</td>  -->
<!-- 					</tr>  -->
		
<!-- 					<tr>  -->
<!-- 						<td style="border:1px solid black">LUNDI</td>  -->
<!-- 						<td colspan="2" rowspan="2" style="border:1px solid black">  -->
<!-- 							<table>  -->
<!-- 								<tr>  -->
<!-- 									<td align="center">8h30</td>  -->
<!-- 									<td align="center">9h30</td>  -->
<!-- 								</tr>  -->
<!-- 								<tr>  -->
<!-- 									<td align="center">16h30</td>  -->
<!-- 									<td align="center">17h30</td>  -->
<!-- 								</tr>  -->
<!-- 							</table>  -->
<!-- 						</td>  -->
<!-- 					</tr>  -->
<!-- 					<tr>  -->
<!-- 						<td style="border:1px solid black">JEUDI</td>  -->
<!-- 					</tr>  -->
<!-- 				</table> -->
<!-- 			</div> -->
			
			
			<div class="customSchedule">
				
				<table>
							<thead>
								<tr class="primary">
									<th scope="col">Jour : <h3>Custom</h3></th>
									<!-- Nom jour de la semaine ou custom -->
									<th scope="col">Begin</th>
									<th scope="col">End</th>
									<th scope="col">Add extra session</th>
								</tr>
							</thead>
							
				<tbody>
				<tr>			
								<td class="">Session N°<span>0</span></td>
									<td>
										<input 
											type="text" 
											class="form-control clockpicker startInputHourCustom" />
									</td>
									<td>
										<input  
											type="text" 
											class="form-control clockpicker endInputHourCustom" />
									</td>

									<td>
										<br>
										<button type="button" th:id="addSessionBtnCustom">
											<span class="glyphicon glyphicon-plus"></span>
										</button>
										<button type="button" th:id="removeSessionBtnCustom">
											<span class="glyphicon glyphicon-minus"></span>
										</button>
									</td>
								</tr>
							</tbody>
				</table>
				</div>
		</div>
	</div>
	<!-- END Schedule bloc -->
</form>	

<!-- STEP 6 : Images -->
<form th:id="form-step-images" th:action="@{/activity/stepImages}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
	<div class="tab" id="step-images" data-isvalid="false">
		<div class="form-container">
			<div class="form-title">
				<span class="title" th:text="#{meetingpoint_step_name}"></span>
			</div>
			<div class="form-indication">
				<span class="indication" th:text="#{meetingpoint_step_indication}"></span>
			</div>
			<div>
				<div th:switch="${activity.images[0].path}">
					<input th:case="null" type="file" th:field="*{images[0].file}" />
					<input th:case="*" type="file" th:field="*{images[__${activity.nbImages}__].file}" />
				</div>
				<div>
					<input type="submit" value="Upload" class="btn btn-lg btn-primary"/>
				</div>
			</div>
			<div id="keepValues" th:if="!${#lists.isEmpty(activity.images)}">
				<div th:each="image, status : ${activity.images}">
					<input type="hidden" th:field="*{images[__${status.index}__].path}"/>
				</div>
			</div>
		
			<div th:if="!${#strings.isEmpty(activity.images[0].path)}" class="container">
			  <div id="myCarousel" class="carousel slide" data-ride="carousel">
		<!-- 	    Wrapper for slides -->
			    <div class="carousel-inner">
		<!-- 		      Slides -->
					  <div class="item active">
					      <img th:src="${activity.images[0].path}" alt="" style="width:100%;">
					 </div>
					 
				     <div class="item" th:each="image, status : ${activity.images}" th:if="${image.path != null}">
				        <img th:src="${image.path}" alt="" style="width:100%;">
				     </div>
			    </div>
			    
		<!-- 	    Left and right controls -->
			    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
			      <span class="glyphicon glyphicon-chevron-left"></span>
			      <span class="sr-only">Previous</span>
			    </a>
			    <a class="right carousel-control" href="#myCarousel" data-slide="next">
			      <span class="glyphicon glyphicon-chevron-right"></span>
			      <span class="sr-only">Next</span>
			    </a>
			  </div>
			</div>
		</div>
	</div>
</form>

<!-- STEP 7 : participation criterias -->
<form th:id="form-step-participationCriterias" th:action="@{/activity/stepParticipationCriterias}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
	<div class="tab" id="step-participationCriterias" data-isvalid="false">
		<div class="form-container">
			<div class="form-title">
				<span class="title" th:text="#{criterias_step_name}"></span> 
			</div>
			<div class="form-indication">
				<span class="indication" th:text="#{criterias_step_indication}"></span>
			</div>
			
			<div class="form-group row-form">
				<select class="form-control form-control-lg" th:field="*{minimumAge}">
					<option th:value="0">0</option>
					<option th:value="1">1</option>
					<option th:value="2">2</option>
					<option th:value="3">3</option>
					<option th:value="4">4</option>
					<option th:value="5">5</option>
					<option th:value="6">6</option>
					<option th:value="7">7</option>
					<option th:value="8">8</option>
					<option th:value="9">9</option>
					<option th:value="10">10</option>
					<option th:value="11">11</option>
					<option th:value="12">12</option>
					<option th:value="13">13</option>
					<option th:value="14">14</option>
					<option th:value="15">15</option>
					<option th:value="16">16</option>
					<option th:value="17">17</option>
					<option th:value="18">18</option>
				</select>
			</div>
				<div class="form-check row-form">
					<span th:text="#{required_id}"></span> 
					<input type="checkbox" class="form-check-input" th:field="*{requiredId}" />
				</div>
				<div class="form-group" style="display: flex; flex-direction: column;">
					<div>
					<span class="indication">Devise utilisée</span>	
					<select class="form-control form-control-lg">
						<option th:value="0">Euros</option>
						<option th:value="1">Dollar</option>
						<option th:value="2">Livre</option>
						<option th:value="3">Yen</option>
					</select>
					</div>
					<div>
					 	<span class="indication">Additional informations</span>
						<textarea class="form-control" placeholder="Set additional informations" oninput="this.className = 'form-control'" rows="3" ></textarea>
					</div>
				</div>	
					
				<div class="form-button">
					<button type="submit" id="validateBtn" class="btn btn-lg btn-primary">Valider</button>
				</div>
			</div>
		</div>
	</form>

<!-- STEP 8 : Default price -->
	<form th:id="form-step-defaultPrice" th:action="@{/activity/stepDefaultPrice}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
		<div class="tab" id="step-defaultPrice" data-isvalid="false">
			<div class="form-container">
				<div class="form-title">
					<span class="title" th:text="#{defaultprice_step_name}"></span>
				</div>
				<div class="form-indication">
					<span class="indication" th:text="#{defaultprice_step_indication}"></span>
				</div>
				<div th:id="global" class="row-form">
					<span>Prix</span>
					<input class="form-control" type="text" th:id="paxDefaultPrice" th:field="*{defaultPax.price}" placeholder="€"/>
					<input type="hidden" th:id="paxDefaultName" th:field="*{defaultPax.name}" th:value="default"/>
					<input type="hidden" th:id="paxDefaultAgeMin" th:field="*{defaultPax.ageMin}" />
					<input type="hidden" th:id="paxDefaultAgeMax" th:field="*{defaultPax.ageMax}" />
				</div>
				<div class="form-button">
					<button type="submit" id="validateBtn" class="btn btn-lg btn-primary">Valider</button>
		 		</div>
		 	</div>
		</div>
	</form>
	
<!-- STEP 9 : Paxs -->
	<form th:id="form-step-paxs" th:action="@{/activity/stepPaxs}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
		<div class="tab" id="step-paxs" data-isvalid="false">
			<div class="form-container">
				<div class="form-title">
					<span class="title" th:text="#{paxs_step_name}"></span>
				</div>
				<div class="form-indication">
					<span class="indication" th:text="#{paxs_step_indication}"></span>
				</div>
				<div class="row-form">
				<!-- TODO : Utiliser get size of list -->
<!-- 					SIZE -->
<!-- 					<span th:text="${#lists.size(activity.paxs)}"></span> -->
<!-- 					FIN SIZE -->
<!-- 					<span th:text="${#lists.size(activity.paxs)-1}"></span> -->
					<span>Nom du pax</span>
					<input class="form-control" type="text" th:field="*{paxs[__${#lists.size(activity.paxs)-1}__].name}" placeholder="Create you pax category" />
					<span>Age minimum</span>
					<input class="form-control" type="text" th:field="*{paxs[__${#lists.size(activity.paxs)-1}__].ageMin}" />
					<span>Age maximum</span>
					<input class="form-control" type="text" th:field="*{paxs[__${#lists.size(activity.paxs)-1}__].ageMax}" />
					<span>Prix</span>
					<input class="form-control" type="text" th:field="*{paxs[__${#lists.size(activity.paxs)-1}__].price}" />
				</div>
				<div class="form-button">
					<button type="submit" id="validateBtn" onclick="createPax();" class="btn btn-lg btn-primary" >Créer</button>
				</div>
			</div>
			<div id="paxsCreated" th:if="${pax.ageMin}"  th:each="pax : ${activity.paxs}" class="col-lg-12 pax-bloc" style="margin-left: 50px; color: white; display: flex;">
				<table>
				<tr>
					<td>
						Nom :  <h5><b><span th:text="${pax.name}" ></span></b></h5>
					</td>
				</tr>
				<tr>
					<td>
						Age minimum : <h5><b><span th:text="${pax.ageMin}" ></span></b></h5>
					</td>
				</tr>
				<tr>
					<td>
						Age maximum :  <h5><b><span th:text="${pax.ageMax}" ></span></b></h5>
					</td>
				</tr>
				<tr>
					<td>
						Prix : <h5><b><span th:text="${pax.price}" ></span></b></h5>
					</td>
				</tr>
				
				</table>
			</div>
		</div>
	</form>

<!-- STEP 10 : Capacity group -->
	<form th:id="form-step-groupCapacity" th:action="@{/activity/stepGroupCapacity}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
		<div class="tab" id="step-capacity" data-isvalid="false">
			<div class="form-container">
				<div class="form-title">
					<span class="title" th:text="#{capacitygroup_step_name}"></span>
				</div>
				<div class="form-indication">
					<span class="indication" th:text="#{capacitygroup_step_indication}"></span>
				</div>
				<div class="row-form ">
					<span th:text="#{minCapacityGroup}"></span>
					<input type="text" class="form-control" onkeyup="this.value=this.value.replace(/\D/g,'')" th:field="*{minCapacityGroup}" autocomplete="off" />
					<span th:text="#{maxCapacityGroup}"></span>
					<input type="text" class="form-control" onkeyup="this.value=this.value.replace(/\D/g,'')" th:field="*{maxCapacityGroup}" autocomplete="off" />
				</div>
				<div class="form-button">
					<button type="submit" id="validateBtn" class="btn btn-lg btn-primary">Valider</button>
				</div>
			</div>
		</div>
	</form>	

<!-- STEP 11 : Validation and submit -->
	<form th:id="form-step-validate-and-send" th:action="@{/activity/validateActivity}" th:object="${activity}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
		<div class="tab" id="step-validate" data-isvalid="false">
			<div class="form-container">
				<span class="title" th:text="#{validateandsubmit_step_name}"></span>
				<button type="submit" id="validateBtn" class="btn btn-lg btn-primary" onclick="">Valider</button>
			</div>
		</div>
	</form>		
		
<script type="text/javascript" th:inline="javascript">
	// Current displayed schedule 
	var currentDisplayedSchedule = "createScheduleBloc1";

	/*<![CDATA[*/var validatedSteps = /*[[${validatedSteps}]]*/null;/*]]>*/
	/*<![CDATA[*/var showCreatedPax = /*[[${showCreatedPax}]]*/false;/*]]>*/

	window.onready = function() {
		jQuery(".tab").hide();
	}
	
	window.onload = function() {

		jQuery(".tab").hide();

		// Init desc per lang
		jQuery('#blocDescFR').show();
		jQuery('#blocDescEN').hide();
		jQuery('#blocDescES').hide();
		jQuery('#blocDescCUSTOM').hide();

		// Hide google map
		document.getElementById("googleMap").style.display = "none";

		// Init autocomplete
		autocomplete("#address");
		autocomplete("#city");

		// Notify tabs already validated
		displayValidatedTabs(validatedSteps);

		initSchedules();
		initDatePicker();

		if (showCreatedPax) {
			jQuery(".pax-item").show();
		} else {
			jQuery(".pax-item").hide();
		}

		// Display the first step
		if (jQuery("#stepNumber").val() >= 0) {
			currentTab = jQuery("#stepNumber").val();
			showTab(jQuery("#stepNumber").val());
		} else {
			currentTab = jQuery("#stepNumber").val();
			showTab(0);
		}
	}

	// Change border color of validated steps in left vertical navbar 
	function displayValidatedTabs(validatedSteps) {
		if (validatedSteps != null) {
			for (var i = 0; i < validatedSteps.length; i++) {
				if (validatedSteps[i] == "stepMeetingPoint") {
					initMap(jQuery("#latitude").val(), jQuery("#longitude").val(), 20);
					document.getElementById("googleMap").style.display = "inline";
				}
				jQuery("#go-to-" + validatedSteps[i]).css("border", "solid 1px green");
			}
		}
	}

	// Change description language with select input
	function toggleDescLang() {
		var descLang = jQuery('#selectDescLang').val();
		if (descLang == 'FR') {
			jQuery('#blocDescFR').show();
			jQuery('#blocDescEN').hide();
			jQuery('#blocDescES').hide();
			jQuery('#blocDescCUSTOM').hide();
		} else if (descLang == 'EN') {
			jQuery('#blocDescEN').show();
			jQuery('#blocDescFR').hide();
			jQuery('#blocDescES').hide();
			jQuery('#blocDescCUSTOM').hide();
		} else if (descLang == 'ES') {
			jQuery('#blocDescES').show();
			jQuery('#blocDescEN').hide();
			jQuery('#blocDescFR').hide();
			jQuery('#blocDescCUSTOM').hide();
		} else if (descLang == 'CUSTOM') {
			jQuery('#blocDescCUSTOM').show(); 
			jQuery('#blocDescES').hide();
			jQuery('#blocDescEN').hide();
			jQuery('#blocDescFR').hide();
		} else {
			jQuery('#blocDescFr').show();
			jQuery('#blocDescEn').hide();
			jQuery('#blocDescEs').hide();
			jQuery('#blocDescCUSTOM').hide();
		}
	}

	// Reinitialize destination city
	function changeDestinationCityWithId(id) {
		document.getElementById(id).value = "";
	}

	// Initialize schedules inputs
	function initSchedules() {
		var inputs;
		jQuery("#removeExtraSessionBtn").hide();
		jQuery('.createScheduleBloc').hide();
		jQuery('.sessionBloc').hide();
		jQuery('#selectWeekday').val(currentDisplayedSchedule);
		jQuery("#" + currentDisplayedSchedule).show();

		for (var i = 0; i < 7; i++) {
			// Show first input for every schedule
			jQuery("#sessionBloc" + i + "0").show();
			for (var j = 0; j < 9; j++) {
				inputs = jQuery("#sessionBloc" + i + j + " :input");
				if (inputs[0].value != "" && inputs[0].value.length > 0) {
					jQuery("#sessionBloc" + i + j).show();
					// TODO : Checker si premier input is null si oui, on le masque
					if (jQuery("#sessionBloc00").val() === 'undefined' || jQuery("#sessionBloc00").val() === null) {
// 						jQuery("#sessionBloc00").hide();
					}
				}
			}
			// Activate the first input displayed
			toggleInputsHour(11, true);
		}
	}

	// Show input of another session (After clicking on +)
	function addSession(weekdayNumber, sessionNumber) {
		var blocToShow = "#sessionBloc" + weekdayNumber + (parseInt(sessionNumber) + 1);
		var btnToHide = "#addSessionBtn" + weekdayNumber + (parseInt(sessionNumber));
		var btnRemoveToHide = "#removeSessionBtn" + weekdayNumber + (parseInt(sessionNumber));
		var btnToShow = "#addSessionBtn" + weekdayNumber + (parseInt(sessionNumber) + 1);
		var btnRemoveToShow = "#removeSessionBtn" + weekdayNumber + (parseInt(sessionNumber) + 1);
		
		jQuery(blocToShow).show();
		jQuery(btnToShow).show();
		jQuery(btnRemoveToShow).show();
		jQuery(btnToHide).hide();
		jQuery(btnRemoveToHide).hide();
	}
	
	// Hide input of another session (After clicking on -)
	function removeSession(weekdayNumber, sessionNumber) {
		var blocToHide = "#sessionBloc" + weekdayNumber + (parseInt(sessionNumber));
		var btnAddToHide = "#addSessionBtn" + weekdayNumber + (parseInt(sessionNumber));
		var btnRemoveToHide = "#removeSessionBtn" + weekdayNumber + (parseInt(sessionNumber));
		var btnAddToShow = "#addSessionBtn" + weekdayNumber + (parseInt(sessionNumber) - 1);
		var btnRemoveToShow = "#removeSessionBtn" + weekdayNumber + (parseInt(sessionNumber) - 1);
		
		jQuery(btnRemoveToShow).show();
		jQuery(btnAddToShow).show();
		jQuery(blocToHide).hide();
		jQuery(btnAddToHide).hide();
		jQuery(btnRemoveToHide).hide();
	}

	function onChangeTime(isBegin) {
		if (isBegin) {
			console.log("ok");
		} else {
			console.log("ko");
		}
		console.log("Input values " + jQuery("#inputSessionBegin11").val());
	}

	function toggleInputsHour(sessionBlocId, isValidable) {
		var inputsToActivate = document.getElementById("sessionBloc" + sessionBlocId).getElementsByTagName("input");
		for (var j = 0; j < inputsToActivate.length; j++) {
			if (inputsToActivate[j] !== 'undefined') {
				inputsToActivate[j].setAttribute("data-settable", isValidable);
				if (!isValidable) {
					inputsToActivate[j].value = "";
				}
			}
		}
	}

	function toggleScheduleDay() {
		var weekday = jQuery('#selectWeekday').val();
		var schedulesBloc, schedulesInputs;

		jQuery("#" + currentDisplayedSchedule).hide();
		jQuery("#" + weekday).show();

		// 		toggleSettableInputs(currentDisplayedSchedule, weekday);

		currentDisplayedSchedule = weekday;
	}

	function toggleSettableInputs(scheduleToHide, scheduleToShow) {

		schedulesBlocToHide = document.getElementById(scheduleToHide);
		schedulesInputsToHide = schedulesBlocToHide.getElementsByTagName("input");

		schedulesBlocToShow = document.getElementById(scheduleToShow);
		schedulesInputsToShow = schedulesBlocToShow.getElementsByTagName("input");

		if (schedulesInputsToHide.length > 0) {
			for (var i = 0; i <= schedulesInputsToHide.length; i++) {
				if (schedulesInputsToHide[i].type == "time") {
					schedulesInputsToHide[i].setAttribute('settable', 'false');
				}
			}
			for (var i = 0; i <= schedulesInputsToShow.length; i++) {
				if (schedulesInputsToShow[i].type == "time") {
					schedulesInputsToShow[i].setAttribute('settable', 'ture');
				}
			}
		}

	}

	function removeExtraSession(weekdayNumber, sessionNumber) {
		jQuery("#usualSchedules0.sessions0.beginHour").val("");
	}
	
	
	function createPax(paxList) {
		
		jQuery("#paxsCreated").show();
// 		// Retrieve pax datas
// 		var name = jQuery("#paxName").val();
// 		var ageMin = jQuery("#paxAgeMin").val();
// 		var ageMax = jQuery("#paxAgeMax").val();
// 		var price = jQuery("#paxPrice").val();
		
// 		// Button labels
// 		var labelBtnModify = "Modifier";
// 		var labelBtnDelete = "Supprimer";
		
// 			// Create div
// 			jQuery("#paxsCreated").append(
// 					'<div class="pax-item" id="' + countPaxCreation + '">'
// 					+'<p> <span class="pax-infos">' + name + '</span> </p>'
// 					+'<input type="hidden" id="paxs[' + countPaxCreation + '].name" name="paxs[' + countPaxCreation + '].name" value="' + name + '" />'
// 					+'<p> <span class="pax-infos">' + ageMin + '</span> </p>'
// 					+ '<input type="hidden" id="paxs[' + countPaxCreation + '].ageMin" name="paxs[' + countPaxCreation + '].ageMin" value="' + ageMin + '" />'
// 					+'<p> <span class="pax-infos">' + ageMax + '</span> </p>'
// 					+ '<input type="hidden" id="paxs[' + countPaxCreation + '].ageMax" name="paxs[' + countPaxCreation + '].ageMax" value="' + ageMax + '" />'
// 					+'<p> <span class="pax-infos">' + price + '</span> </p>'
// 					+ '<input type="hidden" id="paxs[' + countPaxCreation + '].price" name="paxs[' + countPaxCreation + '].price" value="' + price + '" />'
// //					+'<p> <button class="btnModifyPaxCreated" id="btnModifyPaxCreated' + countPaxCreation + '" onclick="modifyPax(' + countPaxCreation + ');">' + labelBtnModify + '</button> </p>'
// 					+'<p> <button class="btnDeletePaxCreated" id="btnDeletePaxCreated' + countPaxCreation + '" onclick="deletePax(' + countPaxCreation + ');">' + labelBtnDelete + '</button> </p>'
// 					+ '</div>');
			
// 			countPaxCreation ++;
// 			hasCreatedPax = true;
			
// 			// Remove inputs values
// 			jQuery("#paxName").val("");
// 			jQuery("#paxAgeMin").val("");
// 			jQuery("#paxAgeMax").val("");
// 			jQuery("#paxPrice").val("");
		
	}
	
</script>

</body>
</html>