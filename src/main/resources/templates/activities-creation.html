<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:include="fragments/header :: header">
</head>
<body>


<h1><span th:text="#{activity_creation}"></span></h1>

<form th:action="@{/activity/create}" th:object="${activity}" method="POST" enctype="multipart/form-data">

<!-- One "tab" for each step in the form: -->

		<div class="container-fluid">
				
				<!-- Barre latérale de progression -->
				<div class="col-lg-2 progbar">
					
					<ul class="nav flex-column">
					  <li class="nav-item">
					  		<div id="goToStepTitle" class="progbar-item" onclick="showTabFromNavBar('0');">
								<span class="inputIndication" th:text="#{title}"></span>
					  		</div>
					  </li>
					  <li class="nav-item">
					    	<div class="progbar-item" onclick="showTabFromNavBar('1');">
								<span class="inputIndication" th:text="#{category}"></span>
					  		</div>
					  </li>
					  <li class="nav-item">
						 	 <div class="progbar-item" onclick="showTabFromNavBar('2');">
						  		<span class="inputIndication" th:text="#{description}"></span>
						  	</div>
					  </li>
					  <li class="nav-item">
						  <div class="progbar-item" onclick="showTabFromNavBar('3');">
						  		<span class="inputIndication" th:text="#{meeting_point}"></span>
						  	</div>
					  </li>
					  <li class="nav-item">
						  <div class="progbar-item" onclick="showTabFromNavBar('4');">
						  		<span class="inputIndication" th:text="#{schedule}"></span>
						  	</div>
					  </li>
					  <li class="nav-item">
						  <div class="progbar-item" onclick="showTabFromNavBar('5');">
						  		<span class="inputIndication" th:text="#{images}"></span>
						  	</div>
					  </li>
					  <li class="nav-item">
						  <div class="progbar-item" onclick="showTabFromNavBar('6');">
						  		<span class="inputIndication" th:text="#{participation_criterias}"></span>
						  	</div>
					  </li>
					  <li class="nav-item">
						  <div class="progbar-item" onclick="showTabFromNavBar('7');">
						  		<span class="inputIndication" th:text="#{price}"></span>
						  	</div>
					  </li>
					  <li class="nav-item">
						  <div class="progbar-item" onclick="showTabFromNavBar('8');">
						  		<span class="inputIndication" th:text="#{group_capacity}"></span>
						  	</div>
					  </li>
					  <li class="nav-item">
						  <div class="progbar-item" onclick="showTabFromNavBar('9');">
						  		<span class="inputIndication" th:text="#{validate_and_send}"></span>
						  	</div>
					  </li>
					</ul>
					
				</div>
				
				
		<!-- STEP 1 : Title -->
				<div class="col-lg-4 container-form">
					
				  <div class="tab">
					<div class="row-form  inputStyle">
						<p>
							<span class="inputTitle" th:text="#{title}"></span>
						</p>
						<p>
							<span class="inputIndication" th:text="#{title_indication}"></span>
						</p>
					</div>
					
					<div class="form-group" th:class="${#fields.hasErrors('title')}? has-error" >
					  	<input type="text" th:field="*{title}" class="form-control form-control-lg" id="title" name="title" autocomplete="off" />
						<span th:if="${#fields.hasErrors('title')}" th:errors="*{title}" th:errorclass="fieldError">Title Error</span>
				    
				    </div>
				 </div>
				 
		<!-- STEP 1 : Category -->
				<div class="tab">
					<div class="row-form  inputStyle">
						<p>
							<span class="inputTitle" th:text="#{category}"></span>
						</p>
						<p>
							<span class="inputIndication" th:text="#{title_indication}"></span>
						</p>
					</div>
					<div class="form-group" th:class="${#fields.hasErrors('category')}? has-error">
						<select class="form-control form-control-lg" th:field="*{category}">
						  <option th:value="#{cat_art}" th:text="#{cat_art}"></option>
						  <option th:value="#{cat_sport}" th:text="#{cat_sport}"></option>
						  <option th:value="#{cat_nature}" th:text="#{cat_nature}"></option>
						  <option th:value="#{cat_food}" th:text="#{cat_food}"></option>
						  <option th:value="#{cat_entertainment}" th:text="#{cat_entertainment}"></option>
						  <option th:value="#{cat_nightlife}" th:text="#{cat_nightlife}"></option>
						  <option th:value="#{cat_discovery}" th:text="#{cat_discovery}"></option>
						</select>
					 </div>
				</div>
			
		<!-- STEP 1 : description -->
		<div class="tab">
			<div class="row-form  inputStyle">
				<p>
					<span class="inputTitle" th:text="#{description}"></span>
				</p>
				<p>
					<span class="inputIndication" th:text="#{title_indication}"></span>
				</p>
				<p>
					<span>Select the language of the description</span>
				</p>
				<select id="selectDescLang" class="form-control" onChange="switchDescLang();">
					<option>FR</option>
					<option>EN</option>
					<option>ES</option>
				</select>

				<br/>

			   <div id="blocDescFr">
					<div class="form-group" th:class="${#fields.hasErrors('descriptionFre')}? has-error">
						 <textarea th:field="*{descriptionFre}" class="form-control form-control-lg form-desc" oninput="this.className = 'form-control'" th:placeholder="#{desc_indication}"></textarea>
						   	<span th:if="${#fields.hasErrors('descriptionFre')}" th:errors="*{descriptionFre}" th:errorclass="fieldError">Description Error</span>
<!-- 			 				<span id="charsCount"></span> 				 -->
<!-- 			 				<span id="charsRequiredField" th:text="#{chars_required}"></span>  -->
						 </div>
					 </div>

					<div id="blocDescEn">
						 <div class="form-group" th:class="${#fields.hasErrors('descriptionEng')}? has-error">
						   	<textarea th:field="*{descriptionEng}" class="form-control form-control-lg form-desc" oninput="this.className = 'form-control'" th:placeholder="#{desc_indication}"></textarea>
						   	<span th:if="${#fields.hasErrors('descriptionEng')}" th:errors="*{descriptionEng}" th:errorclass="fieldError">Description Error</span>
<!-- 			 				<span id="charsCount"></span> 				 -->
<!-- 			 				<span id="charsRequiredField" th:text="#{chars_required}"></span>  -->
						 </div>
					 </div>

					 <div id="blocDescEs">
						 <div class="form-group" th:class="${#fields.hasErrors('descriptionEsp')}? has-error">
						   	<textarea th:field="*{descriptionEsp}" class="form-control form-control-lg form-desc" oninput="this.className = 'form-control'" th:placeholder="#{desc_indication}"></textarea>
						   	<span th:if="${#fields.hasErrors('descriptionEsp')}" th:errors="*{descriptionEsp}" th:errorclass="fieldError">Description Error</span>
<!-- 			 				<span id="charsCount"></span> 				 -->
<!-- 			 				<span id="charsRequiredField" th:text="#{chars_required}"></span>  -->
						 </div>
					 </div>
				</div>
		</div>
	
	
		<!-- STEP 2 : MeetingPoint, city, address and map -->
				<div class="tab">
					<div class="inputStyle">
						<p>
							<span class="inputTitle" th:text="#{meeting_point}"></span>
						</p>
						<p>
							<span class="inputIndication" th:text="#{meeting_point_indication}"></span>
						</p>
					
						<input type="hidden" th:field="*{latitude}"></input>
						<input type="hidden" th:field="*{longitude}"></input>
						<input type="hidden" id="zoom" name="zoom"></input>
						<span  th:text="#{meeting_point_name}"></span>
						<p>
							<input  type="text" class="form-control input-place" value="" th:field="*{meetingPoint}" th:placeholder="#{meeting_point_name}" oninput="this.className = ''" autocomplete="off" />
						</p>
						<span  th:text="#{address}"></span>
						<p>
							<input type="text" class="form-control input-place" value="" th:field="*{address}" th:placeholder="#{address}" oninput="this.className = ''" onclick="changeDestinationCityWithId(this.id)" autocomplete="off" />
						</p>
						<span  th:text="#{city}"></span>
						<p>
							<input type="text" class="form-control input-place" value="" th:field="*{city}" th:placeholder="#{city}" oninput="this.className = ''" onclick="changeDestinationCityWithId(this.id)" autocomplete="off" />
						</p>
						<span  th:text="#{country}"></span>
						<p>
							<input type="text" class="form-control input-place" value="" th:field="*{country}" th:placeholder="#{country}" oninput="this.className = ''" autocomplete="off" />
						</p>
						<span  th:text="#{zip_code}"></span>
						<p>
							<input type="text" class="form-control input-place" value="" th:field="*{zipCode}" th:placeholder="#{zip_code}" oninput="this.className = ''" autocomplete="off" />
						</p>
					</div>
					<div>
<!-- 						<span  th:text="#{map}"></span> -->
						<div id="googleMap">
						</div>
					</div>
			</div>
	
	
	<!-- STEP 3 : schedules  -->
			<div class="tab">
				<div class="row-form ">
					<p>
						<span class="inputTitle" th:text="#{schedule}"></span>
					</p>
					<p>
						<span class="inputIndication" th:text="#{meeting_point_indication}"></span>
					</p>
			
					<p>
						<span th:text="#{start_date_period}"></span>
						<input type="text" id="beginDateText" name="beginDateText" onchange="changeReturnDate(); onChangeDate();" />
					</p>		
					<div>
						<input type="date" th:field="*{beginDate}" />
					</div>
					<p>
						<span th:text="#{end_date_period}"></span>
						<input type="text" id="endDateText" name="endDateText" onchange="onChangeDate();" />
					</p>	
					
					<div>
						<input type="date" th:field="*{endDate}"/>
					</div>
						<span th:text="#{from_time}"></span>
						<div class="form-group">
							<select class="form-control" id="beginHourT" name="beginHourT" onchange="changeReturnTime();">
							</select>
						</div>
						
						<span th:text="#{to_time}"></span>
						<div class="form-group">
							<select class="form-control" id="endHourT" name="endHourT">
							</select>
						</div>
				</div>
			
			</div>
	
	
	
	<!-- STEP 4: Images and videos  -->
			<div class="tab">
				<div class="row-form ">
					<p>
						<span class="inputTitle" th:text="#{images}"></span>
					</p>
					<p>
						<span class="inputIndication" th:text="#{download_cover_image}"></span>
					</p>
					<p>
						<input type="file" th:field="*{mainPictureFile}" th:placeholder="#{mainPictureFile}" oninput="this.className = ''" onchange="displayImg()"/>
					<p>
						<input id="imgDisplay" type="image" src="" value="overview" style="width: 150px; heigth: 150px;" />
					</p>
				</div>
			</div>
			
	<!-- STEP 5 : Additional informations, criteria for participation -->
			<div class="tab">
				<p>
					<span class="inputTitle" th:text="#{participation_criteria}"></span>
				</p>
				<p>
					<span class="inputIndication" th:text="#{download_cover_image}"></span>
				</p>
				<div class="row-form ">
					<span th:text="#{minimum_age}"></span>
					<div class="form-group">
						<select class="form-control form-control-lg" th:field="*{minimumAge}">
							<option value="0">0</option>
							 <option value="1">1</option>
							 <option value="2">2</option>
							 <option value="3">3</option>
							 <option value="4">4</option>
							 <option value="5">5</option>
							 <option value="6">6</option>
							 <option value="7">7</option>
							 <option value="8">8</option>
							 <option value="9">9</option>
							 <option value="10">10</option>
							 <option value="11">11</option>
							 <option value="12">12</option>
							 <option value="13">13</option>
							 <option value="14">14</option>
							 <option value="15">15</option>
							 <option value="16">16</option>
							 <option value="17">17</option>
							 <option value="18">18</option>
						</select>
					 </div>
					</div>
					
					<div class="row-form ">
						<span th:text="#{required_id}"></span>
						 <div class ="form-check">
							<input type="checkbox" class="form-check-input" th:field="*{requiredId}" />
						</div>
					</div>
			</div>
			
			
		<!-- STEP 6 : Price  -->
			<div class="tab">
			
				<div class="row-form ">
					<p>
						<span class="inputTitle" th:text="#{price}"></span>
					</p>
					<p>
						<span class="inputIndication" th:text="#{price_indication}"></span>
					</p>
					<p>
						<select id="selectPaxType" class="form-control" onChange="switchPaxType();">
							<option value="Global">Global</option>
							<option value="Baby">Bebes</option>
							<option value="Infant">Enfants</option>
							<option value="Adult">Adultes</option>
							<option value="Senior">Seniors</option>
							<option value="Students">Etudiants</option>
							<option value="Create">Créer type de client</option>
						</select>
					</p>
				
					<div class ="form-check">
<!-- 						<input type="text" onkeyup="this.value=this.value.replace(/\D/g,'')" th:field="*{}" /> -->
							
							<div id="global">
								<span>Nom du pax - (défini ?)</span>
								<input class="form-control" type="text" th:field="*{paxs[0].name}" />
								<span>Age minimum</span>
								<input class="form-control" type="text" th:id="paxAgeMin" th:field="*{paxs[0].ageMin}" />
								<span>Age maximum</span>
								<input class="form-control" type="text" th:id="paxAgeMax" th:field="*{paxs[0].ageMax}" />
								<span>Prix</span>
								<input class="form-control" type="text" th:id="paxPrice" th:field="*{paxs[0].price}" />
							</div>
							
							<div id="baby">
								<span>Nom du pax - (défini ?)</span>
								<input class="form-control" type="text" th:field="*{paxs[1].name}" placeholder="Bébés" />
								<span>Age minimum</span>
								<input class="form-control" type="text" th:id="paxAgeMin" th:field="*{paxs[1].ageMin}" />
								<span>Age maximum</span>
								<input class="form-control" type="text" th:id="paxAgeMax" th:field="*{paxs[1].ageMax}" />
								<span>Prix</span>
								<input class="form-control" type="text" th:id="paxPrice" th:field="*{paxs[1].price}" />
							</div>
							
							<div id="infant">
								<span>Nom du pax - (défini ?)</span>
								<input class="form-control" type="text" th:field="*{paxs[2].name}" placeholder="Enfants" />
								<span>Age minimum</span>
								<input class="form-control" type="text" th:id="paxAgeMin" th:field="*{paxs[2].ageMin}" />
								<span>Age maximum</span>
								<input class="form-control" type="text" th:id="paxAgeMax" th:field="*{paxs[2].ageMax}" />
								<span>Prix</span>
								<input class="form-control" type="text" th:id="paxPrice" th:field="*{paxs[2].price}" />
							</div>
							
							<div id="adult">
								<span>Nom du pax - (défini ?)</span>
								<input class="form-control" type="text" th:field="*{paxs[3].name}" placeholder="Adultes" />
								<span>Age minimum</span>
								<input class="form-control" type="text" th:id="paxAgeMin" th:field="*{paxs[3].ageMin}" />
								<span>Age maximum</span>
								<input class="form-control" type="text" th:id="paxAgeMax" th:field="*{paxs[3].ageMax}" />
								<span>Prix</span>
								<input class="form-control" type="text" th:id="paxPrice" th:field="*{paxs[3].price}" />
							</div>		
							
							<div id="senior">
								<span>Nom du pax - (défini ?)</span>
								<input class="form-control" type="text" th:field="*{paxs[4].name}" th:placeholder="Seniors" />
								<span>Age minimum</span>
								<input class="form-control" type="text" th:id="paxAgeMin" th:field="*{paxs[4].ageMin}" />
								<span>Age maximum</span>
								<input class="form-control" type="text" th:id="paxAgeMax" th:field="*{paxs[4].ageMax}" />
								<span>Prix</span>
								<input class="form-control" type="text" th:id="paxPrice" th:field="*{paxs[4].price}" />
							</div>	
							
							<div id="create">
								<span>Nom du pax - (défini ?)</span>
								<input class="form-control" type="text" th:field="*{paxs[5].name}" placeholder="Create you pax category" />
								<span>Age minimum</span>
								<input class="form-control" type="text" th:id="paxAgeMin" th:field="*{paxs[5].ageMin}" />
								<span>Age maximum</span>
								<input class="form-control" type="text" th:id="paxAgeMax" th:field="*{paxs[5].ageMax}" />
								<span>Prix</span>
								<input class="form-control" type="text" th:id="paxPrice" th:field="*{paxs[5].price}" />
							</div>																				
					</div>

				</div>
				
				
			</div>
			
		<!-- STEP 7 : Group Capacity  -->
			<div class="tab">
				<div class="row-form ">
					<p>
						<span class="inputTitle" th:text="#{group_capacity}"></span>
					</p>
					<p>
						<span class="inputIndication" th:text="#{group_capacity_indication}"></span>
					</p>
					<div>
						<p>
						   <span th:text="#{minCapacityGroup}"></span>
						   <b></b>
						   <input type="text" onkeyup="this.value=this.value.replace(/\D/g,'')" th:field="*{minCapacityGroup}" autocomplete="off" />
						</p>
					</div>
					<div>
						<p>
						   <span th:text="#{maxCapacityGroup}"></span>
						   <b></b>
						   <input type="text" onkeyup="this.value=this.value.replace(/\D/g,'')" th:field="*{maxCapacityGroup}" autocomplete="off" />
						</p>
					</div>
				</div>
			</div>
			
			<!-- LAST STEP : Validate and submit form -->
			<div class="tab">
				<div class="row-form ">
					<p>
						<span class="inputTitle" th:text="#{validate_and_send}"></span>
					</p>
					<p>
						<span class="inputIndication" th:text="#{validate_and_submit_indication}"></span>
					</p>
				</div>
			</div>
	
	
	<!-- NAVIGATION BUTTON & SUBMIT  -->
			<div class="btnStep">
				<div>
					<button type="button" id="prevBtn" class="btn btn-lg btn-secondary" onclick="nextPrev(-1)">Previous</button>
					<button type="button" id="nextBtn" class="btn btn-lg btn-primary" onclick="nextPrev(1)">Next</button>
				</div>
			</div>
	
			<!-- Circles which indicates the steps of the form: -->
			<!-- We need as many circles as there are steps -->
			<div style="text-align: center; margin-top: 40px;">
				<span class="step"></span> 
				<span class="step"></span> 
				<span class="step"></span> 
				<span class="step"></span>
				<span class="step"></span>
				<span class="step"></span>
				<span class="step"></span>
				<span class="step"></span>
				<span class="step"></span>
				<span class="step"></span>
			</div>
			
		</div>
	</div>
</form>
	
	
<script th:inline="javascript" type="text/javascript">

	var minNumCharsDescription = 200;
	var maxNumCharsDescription = 1000;

	window.onload = function(){
	    // Init google map
		initMap(0, 0);
	    // Hide google map
	    document.getElementById("googleMap").style.display= "none";
	    // Display the current step
	    showTab(0); 
	    // Populate select input
	    populate("#beginHourT");
	    populate("#endHourT");
	    // Init autocomplete
	    autocomplete("#address"); 
		autocomplete("#city");
		// Init desc per lang
		jQuery('#blocDescFr').show();
		jQuery('#blocDescEn').hide();
		jQuery('#blocDescEs').hide();
		// Init paxs inputs
		jQuery('#global').show();
		jQuery('#baby').hide();
		jQuery('#infant').hide();
		jQuery('#adult').hide();
		jQuery('#senior').hide();
		jQuery('#create').hide();
	}
	    

	
	jQuery(function() {
	    $("#beginDateText").datepicker();
	    $("#endDateText").datepicker();
	});
	
	function toggleGoogleMap() {
		var map = document.getElementById("googleMap");
		if (map.style.display === "none") {
			map.style.display = "block";
		} else {
			map.style.display = "none";
		}
	 }
	
	function switchDescLang() {
		var descLang = jQuery('#selectDescLang').val();
		if(descLang == 'FR') {
			jQuery('#blocDescFr').show();
			jQuery('#blocDescEn').hide();
			jQuery('#blocDescEs').hide();
		} else if (descLang == 'EN') {
			jQuery('#blocDescEn').show();
			jQuery('#blocDescFr').hide();
			jQuery('#blocDescEs').hide();
		} else if (descLang == 'ES') {
			jQuery('#blocDescEs').show();
			jQuery('#blocDescEn').hide();
			jQuery('#blocDescFr').hide();
		} else {
			jQuery('#blocDescFr').show();
			jQuery('#blocDescEn').hide();
			jQuery('#blocDescEs').hide();
		}
	}
	
	function switchPaxType() {
		var paxType = jQuery("#selectPaxType").val();
		
		if(paxType =='global') {
			
			jQuery('#global').show();
			jQuery('#baby').hide();
			jQuery('#infant').hide();
			jQuery('#adult').hide();
			jQuery('#senior').hide();
			jQuery('#create').hide();
			
		} else if(paxType == 'Baby') {
			
			jQuery('#baby').show();
			jQuery('#infant').hide();
			jQuery('#adult').hide();
			jQuery('#senior').hide();
			jQuery('#create').hide();
			jQuery('#global').hide();
			
			jQuery("#paxs[1].name").val("Bébés");
			
		} else if(paxType == 'Infant') {
			
			jQuery('#infant').show();
			jQuery('#baby').hide();
			jQuery('#adult').hide();
			jQuery('#senior').hide();
			jQuery('#create').hide();
			jQuery('#global').hide();
			
			jQuery("#paxs[2].name").val("Enfants");

		} else if(paxType == 'Adult') {
			
			jQuery('#adult').show();
			jQuery('#baby').hide();
			jQuery('#infant').hide();
			jQuery('#senior').hide();
			jQuery('#create').hide();
			jQuery('#global').hide();
			
			jQuery("#paxs[3].name").val("Adultes");

		} else if(paxType == 'Senior') {
			
			jQuery('#senior').show();
			jQuery('#baby').hide();
			jQuery('#adult').hide();
			jQuery('#infant').hide();
			jQuery('#create').hide();
			jQuery('#global').hide();
			
			jQuery("#paxs[4].name").val("Seniors");
			
		} else if(paxType == 'Create') {
			
			jQuery('#create').show();
			jQuery('#baby').hide();
			jQuery('#adult').hide();
			jQuery('#senior').hide();
			jQuery('#infant').hide();
			jQuery('#global').hide();
			
			jQuery("#paxs[5].name").val("Fill the pax category name");
			
		}
	}

	
	
// 	function switchPaxType() {
// 		var paxType = jQuery("#selectPaxType").val();
		
// 		console.log(paxType);
		
// 		if(paxType == 'Baby') {
			
// 		} else if(paxType == 'Infant') {
			
// 			jQuery('#paxName').attr('th:field', '*{paxs[1].name}');
// 			jQuery('#paxAgeMin').attr('th:field', '*{paxs[1].ageMin}');
// 			jQuery('#paxAgeMax').attr('th:field', '*{paxs[1].ageMax}');
// 			jQuery('#paxPrice').attr('th:field', '*{paxs[1].price}');

// 		} else if(paxType == 'Adult') {
			
// 			jQuery('#paxAgeMin').attr('th:field', '*{paxs[2].ageMin}');
// 			jQuery('#paxName').attr('th:field', '*{paxs[2].name}');
// 			jQuery('#paxAgeMax').attr('th:field', '*{paxs[2].ageMax}');
// 			jQuery('#paxPrice').attr('th:field', '*{paxs[2].price}');

// 		} else if(paxType == 'Senior') {
			
// 			jQuery('#paxName').attr('th:field', '*{paxs[3].name}');
// 			jQuery('#paxAgeMin').attr('th:field', '*{paxs[3].ageMin}');
// 			jQuery('#paxAgeMax').attr('th:field', '*{paxs[3].ageMax}');
// 			jQuery('#paxPrice').attr('th:field', '*{paxs[3].price}');
			
// 		} else if(paxType == 'Create') {
			
// 			jQuery('#paxName').attr('th:field', '*{paxs[4].name}');
// 			jQuery('#paxAgeMin').attr('th:field', '*{paxs[4].ageMin}');
// 			jQuery('#paxAgeMax').attr('th:field', '*{paxs[4].ageMax}');
// 			jQuery('#paxPrice').attr('th:field', '*{paxs[4].price}');
			
// 		}
		
// 	}
	
</script>
		
</body>
</html>