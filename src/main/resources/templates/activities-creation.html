<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:include="fragments/header :: header">
</head>
<body>


<h1><span th:text="#{activity_creation}"></span></h1>

<form action="#" th:action="@{/activity/create}" th:object="${activity}" method="POST" enctype="multipart/form-data">

<!-- One "tab" for each step in the form: -->

		<div class="container-fluid">
			<div class="row">
				
				<!-- Barre latÃ©rale de progression -->
				<div class="col-lg-2">
				</div>
				
				<!-- Title -->
				<div class="col-lg-4 container-form">
					
				  <div class="tab">
					<div class="row inputStyle">
						<p>
							<span class="inputTitle" th:text="#{title}"></span>
						</p>
						<p>
							<span class="inputIndication" th:text="#{title_indication}"></span>
						</p>
					</div>
					
					<div class="form-group" th:class="${#fields.hasErrors('title')}? has-error" >
					  	<input type="text" th:field="*{title}" class="form-control form-control-lg" id="title" name="title" oninput="this.className = ''" autocomplete="off" />
						<span th:if="${#fields.hasErrors('title')}" th:errors="*{title}" th:errorclass="fieldError">Title Error</span>
				    
				    </div>
				 </div>
				 
<!-- FIRST STEP : Title, category & description -->
		<div class="tab">
					<div class="row inputStyle">
						<p>
							<span class="inputTitle" th:text="#{category}"></span>
						</p>
						<p>
							<span class="inputIndication" th:text="#{title_indication}"></span>
						</p>
					</div>
					<div class="form-group" th:class="${#fields.hasErrors('category')}? has-error">
						<select class="form-control form-control-lg" th:field="*{category}">
						  <option th:value="#{cat_art}" th:text="#{cat_art}"></option>
						  <option th:value="#{cat_sport}" th:text="#{cat_sport}"></option>
						  <option th:value="#{cat_nature}" th:text="#{cat_nature}"></option>
						  <option th:value="#{cat_food}" th:text="#{cat_food}"></option>
						  <option th:value="#{cat_entertainment}" th:text="#{cat_entertainment}"></option>
						  <option th:value="#{cat_nightlife}" th:text="#{cat_nightlife}"></option>
						  <option th:value="#{cat_discovery}" th:text="#{cat_discovery}"></option>
						</select>
					 </div>
				</div>
				
		<div class="tab">
				
					<div class="row inputStyle">
						<p>
							<span class="inputTitle" th:text="#{description}"></span>
						</p>
						<p>
							<span class="inputIndication" th:text="#{title_indication}"></span>
						</p>
					</div>
					 <div class="form-group" th:class="${#fields.hasErrors('description')}? has-error">
					   	<textarea th:field="*{description}" class="form-control form-control-lg" oninput="this.className = 'form-control'"></textarea>
					   	<span th:if="${#fields.hasErrors('description')}" th:errors="*{description}" th:errorclass="fieldError">Description Error</span>
		 				<span id="charsCount"></span> 				
		 				<span id="charsRequiredField" th:text="#{chars_required}"></span> 
					 </div>
				</div>
	
	
	<!-- SECOND STEP : MeetingPoint, city, address and map -->
				<div class="tab">
					<div class="inputStyle">
						<input type="hidden" th:field="*{latitude}"></input>
						<input type="hidden" th:field="*{longitude}"></input>
						<input type="hidden" id="zoom" name="zoom"></input>
						<span  th:text="#{meeting_point_name}"></span>
						<p>
							<input  type="text" class="form-control input-place" value="" th:field="*{meetingPoint}" th:placeholder="#{meeting_point_name}" oninput="this.className = ''" autocomplete="off" />
						</p>
						<span  th:text="#{address}"></span>
						<p>
							<input type="text" class="form-control input-place" value="" th:field="*{address}" th:placeholder="#{address}" oninput="this.className = ''" onclick="changeDestinationCityWithId(this.id)" autocomplete="off" />
						</p>
						<span  th:text="#{city}"></span>
						<p>
							<input type="text" class="form-control input-place" value="" th:field="*{city}" th:placeholder="#{city}" oninput="this.className = ''" onclick="changeDestinationCityWithId(this.id)" autocomplete="off" />
						</p>
						<span  th:text="#{country}"></span>
						<p>
							<input type="text" class="form-control input-place" value="" th:field="*{country}" th:placeholder="#{country}" oninput="this.className = ''" autocomplete="off" />
						</p>
						<span  th:text="#{zip_code}"></span>
						<p>
							<input type="text" class="form-control input-place" value="" th:field="*{zipCode}" th:placeholder="#{zip_code}" oninput="this.className = ''" autocomplete="off" />
						</p>
					</div>
					<div>
<!-- 						<span  th:text="#{map}"></span> -->
						<div id="googleMap">
						</div>
					</div>
			</div>
	
	
	<!-- THIRD STEP : schedules  -->
			<div class="tab">
				<div class="row">
					<p>
						<span th:text="#{start_date_period}"></span>
						<input type="text" id="beginDateText" name="beginDateText" onchange="changeReturnDate(); onChangeDate();" />
					</p>		
					<div>
						<input type="date" th:field="*{beginDate}" />
					</div>
					<p>
						<span th:text="#{end_date_period}"></span>
						<input type="text" id="endDateText" name="endDateText" onchange="onChangeDate();" />
					</p>	
					
					<div>
						<input type="date" th:field="*{endDate}"/>
					</div>
						<span th:text="#{from}"></span>
						<div class="form-group">
							<select class="form-control" id="beginHourT" name="beginHourT" onchange="changeReturnTime();">
							</select>
						</div>
						
						<span th:text="#{to}"></span>
						<div class="form-group">
							<select class="form-control" id="endHourT" name="endHourT">
							</select>
						</div>
				</div>
			
			</div>
	
	
	
	<!-- FOURTH STEP : Images and videos  -->
			<div class="tab">
				<div class="row">
					<p>
						<span th:text="#{download_cover_image}"></span>
						<input type="file" th:field="*{mainPictureFile}" th:placeholder="#{mainPictureFile}" oninput="this.className = ''" onchange="displayImg()"/>
					<p>
						<input id="imgDisplay" type="image" src="" value="overview" style="width: 150px; heigth: 150px;" />
					</p>
				</div>
			</div>
			
	<!-- LAST STEP : Additional informations  -->
	
			<div class="tab">
				<div class="row">
				
					<div>
						<p>
						TEST
						</p>
					</div>

					<div class ="form-check">
					Alcool ?
						<input type="checkbox" class="form-check-input" th:field="*{alcohol}" />
					</div>
					
					<div class="form-group">
						<select class="form-control form-control-lg" th:field="*{minimumAge}">
							<option value="0">0</option>
							 <option value="1">1</option>
							 <option value="2">2</option>
							 <option value="3">3</option>
							 <option value="4">4</option>
							 <option value="5">5</option>
							 <option value="6">6</option>
							 <option value="7">7</option>
							 <option value="8">8</option>
							 <option value="9">9</option>
							 <option value="10">10</option>
							 <option value="11">11</option>
							 <option value="12">12</option>
							 <option value="13">13</option>
							 <option value="14">14</option>
							 <option value="15">15</option>
							 <option value="16">16</option>
							 <option value="17">17</option>
							 <option value="18">18</option>
						</select>
					 </div>
					 
					 <div class ="form-check">
					 	Verification ID ?
						<input type="checkbox" class="form-check-input" th:field="*{alcohol}" />
					</div>
					
					<div class ="form-check">
					 	Price
						<input type="text" onkeyup="this.value=this.value.replace(/\D/g,'')" th:field="*{price}" />
					</div>

				</div>
			</div>
	
	
	<!-- NAVIGATION BUTTON & SUBMIT  -->
			<div class="btnStep">
				<div>
					<button type="button" id="prevBtn" class="btn btn-lg btn-secondary" onclick="nextPrev(-1)">Previous</button>
					<button type="button" id="nextBtn" class="btn btn-lg btn-primary" onclick="nextPrev(1)">Next</button>
				</div>
			</div>
	
			<!-- Circles which indicates the steps of the form: -->
			<!-- We need as many circles as there are steps -->
			<div style="text-align: center; margin-top: 40px;">
				<span class="step"></span> 
				<span class="step"></span> 
				<span class="step"></span> 
				<span class="step"></span>
				<span class="step"></span>
				<span class="step"></span>
				<span class="step"></span>
			</div>
			
		</div>
			
			
		</div>
	</div>
</form>
	
	
<script th:inline="javascript" type="text/javascript">

	var minNumCharsDescription = 200;
	var maxNumCharsDescription = 1000;

	window.onload = function(){
	    initMap(0, 0);
	    document.getElementById("googleMap").style.display= "none";
	    showTab(0); // Display the current tab
	    populate("#beginHourT");
	    populate("#endHourT");
	    autocomplete("#address"); // Init autocomplete
		autocomplete("#city");
		jQuery("#charsCount").text(minNumCharsDescription - jQuery("#description").val().length);
	}
	    
	jQuery("#description").bind('input change keyup keydown paste', function() {
		
		var charsRequiredField = jQuery("#charsRequiredField");
		var charsRemainsMessage = 'caracteres restants';
		var charsRequiredMessage = 'caracteres requis';
		
	    if(this.value.length){
	    	if(this.value.length == 0) {
		    	jQuery("#charsCount").text(minNumCharsDescription);
	    	} else if(this.value.length < minNumCharsDescription) {
	    		charsRequiredField.text(charsRequiredMessage);
		    	jQuery("#charsCount").text(minNumCharsDescription - this.value.length);
	    	} else {
		    	jQuery("#charsCount").text(maxNumCharsDescription - this.value.length);
	    		charsRequiredField.text(charsRemainsMessage);
	    	}
	    }
	    
	});
	
	jQuery(function() {
	    $("#beginDateText").datepicker();
	    $("#endDateText").datepicker();
	});
	
	function toggleGoogleMap() {
		var map = document.getElementById("googleMap");
		if (map.style.display === "none") {
			map.style.display = "block";
		} else {
			map.style.display = "none";
		}
	 }
	
</script>
		
</body>
</html>